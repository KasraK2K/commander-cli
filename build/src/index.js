(()=>{"use strict";var e={736:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createController=t.controllerTextGenerator=void 0;const n=o(r(561)),a=r(571),s=r(489),i=r(176);t.controllerTextGenerator=e=>{const t=(0,a.pascalCase)(e),r=(0,a.camelCase)(e);return`\n/* ------------------------------ Dependencies ------------------------------ */\nimport { Request, Response } from 'express'\n/* ----------------------------- Custom Modules ----------------------------- */\nimport Controller from '../../base/Controller'\nimport { BindInstance, Cache, Role } from '../../common/decorators'\nimport ${r}Service from './${r}.service'\n/* -------------------------------------------------------------------------- */\n\n@BindInstance\nclass ${t}Controller extends Controller {\n    async healthCheck(req: Request, res: Response) {\n        await super.handle(${r}Service.healthCheck, undefined, req, res)\n    }\n}\n\nexport default new ${t}Controller()\n    `};t.createController=e=>{const r=(0,t.controllerTextGenerator)(e),o=(0,s.getFilePath)(e,i.FileNames.CONTROLLER);try{return n.default.writeFileSync(o,r),(0,s.logger)(`${(0,s.getFileName)(e,i.FileNames.CONTROLLER)}\tis created`,i.LogTypes.SUCCESS),!0}catch(e){return!1}}},792:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(988),t),n(r(736),t),n(r(569),t),n(r(422),t),n(r(501),t),n(r(328),t),n(r(24),t)},24:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createModule=void 0;const o=r(792),n=r(489);t.createModule=e=>{let t=!1;(0,o.createController)(e)||(t=!0),(0,o.createSchema)(e)||(t=!0),(0,o.createService)(e)||(t=!0),(0,o.createRepository)(e)||(t=!0),(0,o.createRestClient)(e)||(t=!0),(0,o.createRoutes)(e)||(t=!0),t&&(0,n.rollback)(e)}},501:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createRepository=t.queryTextGenerator=t.repositoryTextGenerator=void 0;const n=o(r(561)),a=r(571),s=r(489),i=r(176);t.repositoryTextGenerator=e=>{const t=(0,a.pascalCase)(e),r=(0,a.camelCase)(e);return`\n/* ----------------------------- Custom Modules ----------------------------- */\nimport { postgresPool } from '../../bootstrap'\nimport ${r}Queries from './${r}.query'\n/* -------------------------------------------------------------------------- */\n\nclass ${t}Repository {\n    public healthCheck() {\n        return new Promise((resolve, reject) => {\n            const query = ${r}Queries.pingDatabase()\n            postgresPool.pool\n                .query(query)\n                .then(() => resolve('Everything Works Fine'))\n                .catch(() => reject('Error on connecting database'))\n        })\n    }\n}\n        \nexport default new ${t}Repository()\n    `};t.queryTextGenerator=()=>"\n/* ------------------------------ Dependencies ------------------------------ */\nimport SqlString from 'sqlstring'\n/* -------------------------------------------------------------------------- */\n\nexport const pingDatabase = () => 'SELECT 1'\n";t.createRepository=e=>{const r=(0,t.repositoryTextGenerator)(e),o=(0,t.queryTextGenerator)(),a=(0,s.getFilePath)(e,i.FileNames.REPOSITORY),l=(0,s.getFilePath)(e,i.FileNames.QUERY);try{return n.default.writeFileSync(a,r),(0,s.logger)(`${(0,s.getFileName)(e,i.FileNames.REPOSITORY)}\tis created`,i.LogTypes.SUCCESS),n.default.writeFileSync(l,o),(0,s.logger)(`${(0,s.getFileName)(e,i.FileNames.QUERY)}\t\tis created`,i.LogTypes.SUCCESS),!0}catch(e){return!1}}},328:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createRestClient=t.restClientTextGenerator=void 0;const n=o(r(561)),a=r(571),s=r(489),i=r(176);t.restClientTextGenerator=e=>((0,a.camelCase)(e),`\n@module={{host}}/${a.camelCase}\n\n###\n\n# @name health-check\nGET {{module}}/health-check\nContent-Type: application/json\n`);t.createRestClient=e=>{const r=(0,t.restClientTextGenerator)(e),o=(0,s.getFilePath)(e,i.FileNames.REST);try{return n.default.writeFileSync(o,r),(0,s.logger)(`${(0,s.getFileName)(e,i.FileNames.REST)}\t\tis created`,i.LogTypes.SUCCESS),!0}catch(e){return!1}}},988:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createRoutes=t.routesTextGenerator=void 0;const n=o(r(561)),a=r(571),s=r(489),i=r(176);t.routesTextGenerator=e=>((0,a.camelCase)(e),`\n/* ------------------------------ Dependencies ------------------------------ */\nimport express from 'express'\n/* -------------------------------------------------------------------------- */\n\n/* -------------------------------- Constants ------------------------------- */\nconst router = express.Router()\n/* -------------------------------------------------------------------------- */\n\n/* ------------------------------- Controllers ------------------------------ */\nimport ${a.camelCase}Controller from './${a.camelCase}.controller'\n/* -------------------------------------------------------------------------- */\n\nrouter.post('/health-check', ${a.camelCase}Controller.healthCheck)\n\nexport default router\n`);t.createRoutes=e=>{const r=(0,t.routesTextGenerator)(e),o=(0,s.getFilePath)(e,i.FileNames.ROUTES);try{return n.default.writeFileSync(o,r),(0,s.logger)(`${(0,s.getFileName)(e,i.FileNames.ROUTES)}\t\tis created`,i.LogTypes.SUCCESS),!0}catch(e){return!1}}},569:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createSchema=t.schemaTextGenerator=void 0;const n=o(r(561)),a=o(r(411)),s=r(571),i=r(489),l=r(176);t.schemaTextGenerator=()=>"\nimport { archiveSchema, listSchema } from 'src/common/helpers/validator.schemas'\n\nfunction getUpsertSchema(type: string) {\n    const schema = {\n        type: 'object',\n        required: ['data'],\n        additionalProperties: false,\n        properties: {\n            data: {\n                type: 'object',\n                required: type === 'update' ? ['id'] : ['name'],\n                additionalProperties: false,\n                properties: {\n                    id: { type: 'integer' },\n                    name: { type: 'string', sanitize: (data) => data.substring(0, 50) },\n                },\n            },\n        },\n    }\n\n    if (type === 'update') {\n        schema.properties.data.properties['id'] = { type: 'integer' }\n    }\n    return schema\n}\n\nexport default {\n    insert: getUpsertSchema('insert'),\n    update: getUpsertSchema('update'),\n    archive: archiveSchema,\n    portalList: listSchema,\n}    \n";t.createSchema=e=>{const r=(0,t.schemaTextGenerator)(),o=(0,i.getFilePath)(e,l.FileNames.SCHEMA),c=(0,s.pascalCase)(e),u=a.default.resolve(process.cwd(),`src/modules/${c}/validation`);try{return n.default.mkdirSync(u,{recursive:!0}),(0,i.logger)(`${(0,i.getFileName)(e,l.FileNames.SCHEMA)}\tis created`,l.LogTypes.SUCCESS),n.default.writeFileSync(o,r),!0}catch(e){return console.log({error:e}),!1}}},422:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createService=t.serviceTextGenerator=void 0;const n=o(r(561)),a=r(571),s=r(489),i=r(176);t.serviceTextGenerator=e=>{const t=(0,a.pascalCase)(e),r=(0,a.camelCase)(e);return`\n/* ----------------------------- Custom Modules ----------------------------- */\nimport ${r}Repository from './${r}.repository'\n/* -------------------------------------------------------------------------- */\n\nclass ${t}Service {\n    healthCheck() {\n        return new Promise((resolve, reject) => {\n            ${r}Repository.healthCheck().then(resolve).catch(reject)\n        })\n    }\n}\n\nexport default new ${t}Service()\n`};t.createService=e=>{const r=(0,t.serviceTextGenerator)(e),o=(0,s.getFilePath)(e,i.FileNames.SERVICE);try{return n.default.writeFileSync(o,r),(0,s.logger)(`${(0,s.getFileName)(e,i.FileNames.SERVICE)}\t\tis created`,i.LogTypes.SUCCESS),!0}catch(e){return!1}}},37:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFileName=t.rollback=t.createModuleFolder=t.checkFolderExistence=void 0;const n=o(r(561)),a=o(r(411)),s=r(571),i=r(176),l=r(683),c=r(489);t.checkFolderExistence=e=>{const t=(0,s.pascalCase)(e);return n.default.existsSync(a.default.resolve(process.cwd(),`src/modules/${t}`))};t.createModuleFolder=e=>{const t=(0,c.getModuleFolderPath)(e);try{return n.default.mkdirSync(t,{recursive:!0}),!0}catch(e){return console.log(e),!1}};t.rollback=e=>{(0,l.logger)(`[rollback]: Can not create ${e} module.`,i.LogTypes.ERROR);const t=(0,c.getModuleFolderPath)(e);n.default.rmSync(t,{recursive:!0,force:!0})};t.getFileName=(e,t)=>{const r=(0,s.camelCase)(e);return{[i.FileNames.ROUTES]:`${r}.routes.ts`,[i.FileNames.CONTROLLER]:`${r}.controller.ts`,[i.FileNames.SCHEMA]:"validation/schema.ts",[i.FileNames.SERVICE]:`${r}.service.ts`,[i.FileNames.REPOSITORY]:`${r}.repository.ts`,[i.FileNames.QUERY]:`${r}.query.ts`,[i.FileNames.REST]:"_rest.http",[i.FileNames.MODULE]:""}[t]}},489:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(109),t),n(r(683),t),n(r(37),t)},683:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const n=o(r(22)),a=r(176);t.logger=(e,t)=>{const r={[a.LogTypes.VERBOSE]:n.default.white,[a.LogTypes.SUCCESS]:n.default.green,[a.LogTypes.WARNING]:n.default.rgb(255,255,0),[a.LogTypes.DEBUG]:n.default.rgb(0,0,255),[a.LogTypes.ERROR]:n.default.red,[a.LogTypes.LOVE]:n.default.hex("#f6009b")};console.log(r[t](e))}},109:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFilePath=t.getModuleFolderPath=void 0;const n=o(r(411)),a=r(571),s=r(176),i=r(489);t.getModuleFolderPath=e=>{const t=(0,a.pascalCase)(e);return n.default.resolve(process.cwd(),`src/modules/${t}`)};t.getFilePath=(e,t)=>{const r=(0,a.pascalCase)(e);return t===s.FileNames.MODULE?"":n.default.resolve(process.cwd(),`src/modules/${r}/${(0,i.getFileName)(e,t)}`)}},805:(e,t)=>{var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.LogTypes=t.FileNames=void 0,function(e){e.ROUTES="routes",e.CONTROLLER="controller",e.SCHEMA="schema",e.SERVICE="service",e.REPOSITORY="repository",e.QUERY="query",e.MODULE="module",e.REST="rest"}(r||(t.FileNames=r={})),function(e){e[e.VERBOSE=0]="VERBOSE",e[e.SUCCESS=1]="SUCCESS",e[e.WARNING=2]="WARNING",e[e.DEBUG=3]="DEBUG",e[e.ERROR=4]="ERROR",e[e.LOVE=5]="LOVE"}(o||(t.LogTypes=o={}))},176:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(805),t),n(r(926),t)},926:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},22:e=>{e.exports=require("chalk")},571:e=>{e.exports=require("change-case-all")},304:e=>{e.exports=require("commander")},561:e=>{e.exports=require("node:fs")},411:e=>{e.exports=require("node:path")}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}(()=>{const e=r(304),t=r(792),o=r(489),n=new e.Command;n.name("Generate").description("Generate command help to create file.").command("generate").option("--routes","Create route file.").option("-c, --controller","Create controller file.").option("--schema","Create schema file.").option("-s, --service","Create service file.").option("-r, --repository","Create repository file.").option("--rest","Create rest client files.").option("-m, --module","Create all files.").argument("moduleName","Name for file eq: user -> User<Controller, Service, Repository>").action(((e,r)=>{if((0,o.checkFolderExistence)(e)||(0,o.createModuleFolder)(e),r.module)(0,t.createModule)(e);else{const o={routes:t.createRoutes,controller:t.createController,schema:t.createSchema,service:t.createService,repository:t.createRepository,rest:t.createRestClient},n=Object.keys(r).map((e=>e.toLowerCase()));for(const t of n)o[t](e)}})),n.parse(process.argv)})()})();